#:import NoTransition kivy.uix.screenmanager.NoTransition

WindowManager:
    FirstWindow:
    StudWindow:
    AddStudent:
    TeachWindow:
    FileChose:
    AdminWindow:
    AdminEtuWindow:
    MatiereWindow:
    ProfWindow:

<FirstWindow>
    name:"hub"
    FloatLayout:
        size:root.width, root.height
        canvas.before:
            Color:
                rgba:1,1,1,1
            Rectangle:
                pos:self.pos
                size:self.size

        spacing:1

        Label:
            color:192,192,192,1
            text:"Bienvenue"
            font_size:40
            size_hint_x:1
            size_hint_y:.3
            pos_hint:{"x":0.0,"y":0.7}

        Label:
            color:192,192,192,1
            text:"Identifiant:"
            font_size:30
            size_hint_x:1
            size_hint_y:.25
            pos_hint:{"x":0, "y":0.5}
        TextInput:
            id:identif
            text:"prof"
            multiline:False
            font_size:25
            size_hint_x:0.5
            size_hint_y:.07
            halign:"center"
            pos_hint:{"x":0.245, "y":0.5}
        Label:
            id:mdp_lbl
            color:192,192,192,1
            text:"Mot de passe:"
            font_size:30
            size_hint_x:1
            size_hint_y:.25
            pos_hint:{"x":0, "y":0.3}
        TextInput:
            id:mdp
            text:"prof"
            multiline:False
            font_size:25
            size_hint_x:0.5
            size_hint_y:.07
            halign:"center"
            pos_hint:{"x":0.245, "y":0.3}
            password:True
            password_mask:'•'

        Button:
            id:valide
            text:"Valider"
            background_color:.225,0.225,.225,.3
            size_hint_x:0.3
            size_hint_y:0.07
            pos_hint:{"x":0.35, "y":0.15}
            on_press:
                app.root.current = app.valider()
                root.manager.transition.direction = "left"
        Button:
            id:new_student
            text:"Nouvel étudiant"
            background_color:255, 255, 255 , 1
            border:1,1,1,1
            color:0,0,0,.5
            font_size:15
            size_hint_x:0.2
            size_hint_y:0.03
            pos_hint:{"x":0.545, "y":0.269}
            halign:"right"
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "addstudent"

<StudWindow>
    name:"second"

   
       
    FloatLayout:
        id:panel_etu
        size:root.width, root.height

        canvas.before:
            Color:
                rgba:1,1,1,1
            Rectangle:
                pos:self.pos
                size:self.size

        Label:
            id:nom
            color:192,192,192,1
            font_size:32
            pos_hint:{"x":0 , "y":0.35 }

        TextInput:
            hint_text:"Recherche"
            multiline:False
            font_size:25
            size_hint_x:0.5
            size_hint_y:.07
            halign:"center"
            pos_hint:{"x":0.02 , "y":0.7}

        GridLayout:
            cols : 3
            id : grid0
            pos_hint : {"x" : 0 , "y" : 0.12}
            size_hint_x:1

            Label:
                id:matiere
                color:192,192,192,1
                text:"Matière"
                font_size:25
                size_hint_y : 50
                
            Label:
                id:prof
                color:192,192,192,1
                text:"Professeur"
                font_size:25
                size_hint_y : 50
                
            Label:
                id:note
                color:192,192,192,1
                text:"Note"
                font_size:25
                size_hint_y : 50

        ScrollView :
            do_scroll_y : True
            do_scroll_x : False
            size_hint_y : .41
            pos_hint: {"x": 0, "y": 0.18}
            spacing : 1
            
            canvas.before:
                Color:
                    rgba:0,0,0,.1
                Rectangle:
                    pos:self.pos
                    size:self.size
                
            GridLayout:
                cols : 3
                id: grid1
                
                pos_hint : {"x": 0, "y": -0.5}
                size_hint_x:1
                size_hint_y: None
                height : self.minimum_height
                width : self.minimum_width
                spacing : 25
                padding : 10
                

                
                


        Button:
            text:"Planning"
            background_color:.225,0.225,.225,.3
            font_size:35
            size_hint_x:.2
            size_hint_y:.1
            pos_hint:{"x":0, "y":.005}
            on_release: 
                app.get_stats()

        Button:
            text:"Déconnexion"
            background_color:.225,0.225,.225,.3
            font_size:25
            size_hint_x:.2
            size_hint_y:.1
            pos_hint:{"x":.8, "y":0.005}
            on_press:
                app.root.current = "hub"
                root.manager.transition.direction = "right"
                app.clear_note()

<AddStudent>
    name:"addstudent"

    FloatLayout:
        size:root.width, root.height

        canvas.before:
            Color:
                rgba:1,1,1,1
            Rectangle:
                pos:self.pos
                size:self.size

        Label:
            color:192,192,192,1
            font_size:32
            text:"Information étudiant"
            pos_hint:{"x":0 , "y":0.40 }

        Label:
            color:192,192,192,1
            text:"Nom"
            pos_hint:{"x":0, "y":0.31}
            font_size:25
        TextInput:
            id:t_nom
            pos_hint:{"x":.5-(self.size_hint_x/2), "y":0.71}
            size_hint_x:.15
            size_hint_y:.06
            halign:"center"
            font_size:20
        Label:
            color:192,192,192,1
            text:"Prénom"
            pos_hint:{"x":0, "y":0.18}
            font_size:25
        TextInput:
            id:t_prenom
            pos_hint:{"x":.5-(self.size_hint_x/2), "y":0.58}
            size_hint_x:.15
            size_hint_y:.06
            halign:"center"
            font_size:20
        Image:
            id:i_etu
            source:""
            size_hint_x:.1
            size_hint_y:.1
            pos_hint:{"x":.45, "y":.46}
        Button:
            id:b_filechose
            text:"Choisir la photo"
            size_hint_x:0.15
            size_hint_y:0.055
            pos_hint:{"x":.5-(self.size_hint_x/2), "y":0.4}
            background_color:.225,0.225,.225,.4
            on_release:
                root.manager.transition = NoTransition()
                app.root.current = "file_chose"

        Label:
            id:l_sexe
            color:192,192,192,1
            text:"Sexe"
            pos_hint:{"x":0, "y":-.12}
            font_size:23

        Label:
            color:192,192,192,1
            text:"Homme"
            font_size:15

            pos_hint:{"x":-.1, "y":-.155}

        Label:
            color:192,192,192,1
            text:"Femme"
            font_size:15

            pos_hint:{"x":.1, "y":-.155}

        BoxLayout:
            orientation:"horizontal"
            size_hint_x:0.1
            size_hint_y:.1
            pos_hint:{"x":.45, "y":.31}
            spacing:20
            CheckBox:
                id:ck_h
                color:1,0,1,1
                pos_hint:{"x":-.03, "y":-.15}
                size_hint_x:1
                on_press:app.solo_check2()
            CheckBox:
                id:ck_f
                color:1,0,1,1
                pos_hint:{"x": .01,"y":-.15}
                size_hint_x:1
                on_press:app.solo_check()

        Label:
            id:l_year
            color:192,192,192,1
            text:"Année d'étude"
            pos_hint:{"x":0, "y":-.20}
            font_size:23

        Label:
            color:192,192,192,1
            text:"1A"
            font_size:15
            pos_hint:{"x":-.1, "y":-.25}

        Label:
            color:192,192,192,1
            text:"2A"
            font_size:15
            pos_hint:{"x":.1, "y":-.25}

        BoxLayout:
            orientation:"horizontal"
            size_hint_x:0.1
            size_hint_y:.1
            pos_hint:{"x":.45, "y":.215}
            spacing:20
            CheckBox:
                id:ck_1a
                color:1,0,1,1
                pos_hint:{"x":-.03, "y":-.15}
                size_hint_x:1
                on_press:app.solo_check4()
            CheckBox:
                id:ck_2a
                color:1,0,1,1
                pos_hint:{"x": .01,"y":-.15}
                size_hint_x:1
                on_press:app.solo_check3()

        Label:
            color:192,192,192,1
            text:"Mot de passe" 
            pos_hint: {"x":0, "y":-.31}
            font_size: 23

        TextInput:
            id: t_mdp
            pos_hint:{"x":.5-(self.size_hint_x/2), "y":0.10}  
            size_hint_x:.20
            size_hint_y:.06
            halign:"center"
            font_size:20 
            password:True
            password_mask:'•' 
        
        Button:
            id:sh_hd 
            text:"Show"
            background_color:255, 255, 255 , 1
            border:1,1,1,1
            color:0,0,0,.5
            font_size:15
            size_hint_x:0.12
            size_hint_y:0.03
            pos_hint:{"x":0.6, "y":0.12}
            halign:"right"
            on_release:
                app.show_to_hide_password()

        Button:
            text:"Valider"
            background_color:.225,0.225,.225,.4
            size_hint_x:0.3
            size_hint_y:0.07
            pos_hint:{"x":0.35, "y":0.02}
            on_press:
                app.add_student()
                root.manager.transition = NoTransition()
                app.reset_addstudent()

        Button:
            text:"Retour"
            background_color:.225,.225,.225,.4
            size_hint_x:0.18
            size_hint_y:0.055
            pos_hint:{"x":0.02 , "y":.95}
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "hub"
                app.reset_addstudent()


<FileChose>
    name:"file_chose"
    id:f_filechose
    BoxLayout:
        orientation:"vertical"
        size:root.width, root.height
        canvas.before:
            Color:
                rgba:0,0,0,1
            Rectangle:
                pos:self.pos
                size:self.size
        padding:50
        spacing:20

        Image:
            id:i_image
            source:""
            background_color:0,0,0,1

        FileChooserIconView:
            id:filechoser
            filters:[lambda folder, filename:not filename.endswith('.txt')]
            on_selection:root.selected(filechoser.selection)


        BoxLayout:
            orientation:"horizontal"
            spacing:1
            size_hint_y:.3
            Button:
                text:"Quitter"
                size_hint_x:.6
                size_hint_y:.5
                on_release:
                    root.manager.transition = NoTransition()
                    app.root.current = "addstudent"
            Button:
                text:"Valider"
                size_hint_x:.6
                size_hint_y:.5
                on_release:
                    app.save_image(filechoser.selection)
                    root.manager.transition = NoTra
                    nsition()
                    app.root.current = "addstudent"

<TeachWindow>
    name : "teacher"


    FloatLayout : 
        orientation:"vertical"
        size:root.width, root.height

        canvas.before:
            Color:
                rgba:1,1,1,1
            Rectangle:
                pos:self.pos
                size:self.size

     
        Button : 
            text : "Espace Note"
            pos_hint : {"x" : 0, "y" : .7}
            size_hint_x : .2
            size_hint_y : .1
            background_color:.225,0.225,.225,.3
            font_size:25
            on_release : app.espace_note()

        ScrollView : 
            
            GridLayout : 
                cols : 1        

        Button : 
            text : "Liste élève"
            pos_hint : {"x" : 0, "y" : .6}
            size_hint_x : .2
            size_hint_y : .1
            background_color:.225,0.225,.225,.3
            font_size:25   
        Button : 
            text : "Vie Scolaire"
            pos_hint : {"x" : 0, "y" : .5}
            size_hint_x : .2
            size_hint_y : .1
            background_color:.225,0.225,.225,.3
            font_size:25     
        
        
        Button:
            text:"Déconnexion"
            background_color:.225,0.225,.225,.3
            font_size:25
            size_hint_x:.2
            size_hint_y:.1
            pos_hint:{"x":.8, "y":0.005}
            on_press:
                app.root.current = "hub"
                root.manager.transition.direction = "right"
                app.clear_note()


<AdminEtuWindow>
    name: "liste_etu"

    FloatLayout:
        orientation:"vertical"
        size:root.width, root.height

        canvas.before:
            Color:
                rgba:1,1,1,1
            Rectangle:
                pos:self.pos
                size:self.size
        Button:
            text:"Retour"
            background_color:.225,.225,.225,.4
            size_hint: 0.3, 0.1
            pos_hint:{"x":0.02 , "top":1}
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "admin"
                app.clear_stud()

        GridLayout:
            cols: 7
            size_hint: 0.9, 0
            pos_hint:{"x":0.02 , "top":0.8}

            Label:
                text:"Photo"
                color:192,192,192,1
                font_size:20
            Label:
                text:"Username"
                color:192,192,192,1
                font_size:20
            Label:
                text:"Nom"
                color:192,192,192,1
                font_size:20
            Label:
                text:"Prénom"
                color:192,192,192,1
                font_size:20
            Label:
                text:"Année"
                color:192,192,192,1
                font_size:20
            Label:
                text:"Sexe"
                color:192,192,192,1
                font_size:20
            Label:
                text:"Status"
                color:192,192,192,1
                font_size:20
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            size_hint: 0.9, 0.78
            pos_hint:{"x":0.02 , "top":0.78}
            canvas.before:
                Color:
                    rgba:1,0,1,1
                Rectangle:
                    pos:self.pos
                    size:self.size
            GridLayout:
                id:grid_etu
                cols: 7
                size_hint_y : None
                height : self.minimum_height
                width : self.minimum_width
                spacing:10
                row_force_default:True
                row_default_height:40

<AdminWindow>
    name: "admin"

    FloatLayout:
        orientation:"vertical"
        size:root.width, root.height

        canvas.before:
            Color:
                rgba:1,1,1,1
            Rectangle:
                pos:self.pos
                size:self.size
        Button:
            text:"Retour"
            background_color:.225,.225,.225,.4
            size_hint: 0.3, 0.1
            pos_hint:{"x":0.02 , "top":1}
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "hub"

        Label:
            text:"Bienvenue sur le panel administrateur"
            color:192,192,192,1
            font_size:30
            size_hint: 0.3, 0.1
            pos_hint:{"x":0.35 , "top":.9}

        Button:
            text:"Liste des comptes étudiants"
            background_color:.225,.225,.225,.4
            size_hint: 0.3, 0.1
            pos_hint:{"x":0.35 , "top":.8}
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "liste_etu"
                app.get_stud()

        Button:
            text:"Liste des matières"
            background_color:.225,.225,.225,.4
            size_hint: 0.3, 0.1
            pos_hint:{"x":0.35 , "top":.7}
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "liste_mat"
                app.get_stud()

        Button:
            text:"Liste des professeurs"
            background_color:.225,.225,.225,.4
            size_hint: 0.3, 0.1
            pos_hint:{"x":0.35 , "top":.6}
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "liste_prof"
                app.get_stud()

<MatiereWindow>
    name:"liste_mat"

    FloatLayout:
        orientation:"vertical"
        size:root.width, root.height

        canvas.before:
            Color:
                rgba:1,1,1,1
            Rectangle:
                pos:self.pos
                size:self.size
        Button:
            text:"Retour"
            background_color:.225,.225,.225,.4
            size_hint: 0.3, 0.1
            pos_hint:{"x":0.02 , "top":1}
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "admin"

<ProfWindow>
    name:"liste_prof"

    FloatLayout:
        orientation:"vertical"
        size:root.width, root.height

        canvas.before:
            Color:
                rgba:1,1,1,1
            Rectangle:
                pos:self.pos
                size:self.size
        Button:
            text:"Retour"
            background_color:.225,.225,.225,.4
            size_hint: 0.3, 0.1
            pos_hint:{"x":0.02 , "top":1}
            on_press:
                root.manager.transition = NoTransition()
                app.root.current = "admin"